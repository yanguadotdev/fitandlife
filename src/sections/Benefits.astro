---
import { benefits } from '@/data/site-data'
import { cn } from '@/lib/utils'
---

<section id='benefits' class='pt-40'>
  <div class='container max-w-7xl'>
    <h2 class='font-secondary text-big overflow-hidden leading-none'>
      <div>MEMBERSHIP</div>
      <div class='flex-wrap gap-4 gap-y-0 md:ml-32 md:flex'>
        WITH <span
          id='textReveal'
          class='text-primary ease-bezier translate-y-full transition-transform delay-300 duration-500'
          >BEST&nbsp;BENEFITS</span
        >
      </div>
    </h2>
    <!-- gallery -->
    <div class='mt-16 gap-4 sm:grid md:grid-cols-2'>
      {
        benefits.map((benefit, i) => {
          const { label, img } = benefit
          return (
            <div
              class={cn(
                'overflow-hidden rounded-lg sm:flex sm:h-96 sm:items-center md:h-auto md:w-full md:flex-col',
                i === 2 && 'md:col-span-2 md:flex-row',
              )}
            >
              <div class='md:h-70 lg:h-90 aspect-square sm:aspect-auto sm:w-3/4 md:aspect-square md:w-full'>
                <img class='size-full object-cover' src={img} alt='' />
              </div>
              <div
                class={cn(
                  'bg-gray xs:aspect-video flex aspect-square h-full items-center justify-center text-balance sm:aspect-auto md:w-full md:py-4',
                  i === 2 && 'md:w-1/3',
                )}
              >
                <h3 class='sm:bg-gray font-secondary flex size-full max-w-48 items-center bg-black px-4 text-center text-2xl uppercase'>
                  {label}
                </h3>
              </div>
            </div>
          )
        })
      }
    </div>
  </div>
</section>

<script>
  import { $ } from '@/lib/dom-selector'
  import { observeWhenVisible } from '@/lib/observer-when-visible'

  const subtitle = $('#benefits h2') as HTMLElement
  const textToReveal = $('#textReveal') as HTMLElement

  observeWhenVisible(
    subtitle,
    () => {
      textToReveal?.classList.remove('translate-y-full')
    },
    { threshold: 0.25 },
  )
</script>
